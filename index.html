<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sundial</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Location Permission Modal -->
  <div id="locationModal" class="modal">
    <div class="modal-content">
      <h2>☀️ Welcome to Sundial</h2>
      <p>We use your location to calculate your daily sun timeline and score.</p>
      <button class="loc-trigger">
        <span class="gradient-text">Let's go!</span>
      </button>
      <button class="loc-trigger secondary-btn">
        Retry Location Access
      </button>
      <div id="statusMessage" class="status-message"></div>
    </div>
  </div>

  <main>
    <div class="content-card">
      <!-- Main Score Section -->
      <section id="score-section">
        <h2 id="score-title">Today’s sky score</h2>
        <h1 id="score">
          --%
          <span id="info-icon" title="What does this mean?">ℹ️</span>
        </h1>
        <p id="description">Loading...</p>
        <p id="score-context">Loading sun clarity…</p>
      </section>

      <!-- Tooltip Info Panel -->
      <div id="info-tooltip" class="hidden">
        <p><strong>Sun Score</strong> is based on cloud cover, humidity, and visibility. It reflects the sky’s current beauty, from gloomy to stunning.</p>
        <ul>
          <li><strong>90–100:</strong> Stunning skies</li>
          <li><strong>70–89:</strong> Gorgeous and glowing</li>
          <li><strong>50–69:</strong> Pleasant</li>
          <li><strong>30–49:</strong> Some clouds</li>
          <li><strong>0–29:</strong> Gloomy</li>
        </ul>
      </div>

      <!-- Timeline Section -->
      <section id="timeline-container">
        <h2>Today's sun timeline</h2>
        <p id="score-context">These percentages estimate the clarity and brightness of the sky during each phase.</p>

        <!-- Focus Block for Active Phase -->
        <div id="phase-focus" class="focus-card" style="display:none">
          <div class="header">
            <strong id="focus-title">Sunrise</strong>
            <span id="focus-label" class="label">Pretty clear</span>
          </div>
          <div class="bar-container">
            <div class="bar-fill" id="focus-fill">
              <span id="focus-score">--%</span>
            </div>
          </div>
          <div class="footer">
            <span id="focus-time">--:--</span>
            <span id="focus-ago">(loading)</span>
          </div>
        </div>

        <!-- Timeline List -->
        <ul class="timeline-list" id="timeline-list">
          <!-- JS will populate list items here -->
        </ul>
      </section>

      <!-- Refresh Button -->
      <button onclick="refresh()">Refresh</button>
    </div>
  </main>

  <script src="script.js"></script>
  
  <div id="attribution-tooltip" class="attribution-tooltip hidden">
    <span>Weather data from </span><a href="https://sunrise-sunset.org" target="_blank">Sunrise-Sunset.org</a>, <a href="https://openweathermap.org" target="_blank">OpenWeather</a>, and <a href="https://www.tomorrow.io" target="_blank">Tomorrow.io</a>.
  </div>
  <button id="attribution-toggle">?</button>

</body>
</html>